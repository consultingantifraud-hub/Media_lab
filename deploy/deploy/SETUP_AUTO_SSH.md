# Настройка автоматического SSH подключения

Эта инструкция позволит настроить автоматическое подключение к серверу без ввода пароля каждый раз.

## Шаг 1: Создание файла с учетными данными

1. Скопируйте файл `deploy/config/server-credentials.json.example` в `deploy/config/server-credentials.json`
2. Откройте `deploy/config/server-credentials.json` в текстовом редакторе
3. Замените `YOUR_PASSWORD_HERE` на ваш реальный пароль сервера

**Важно:** Файл `server-credentials.json` добавлен в `.gitignore` и не будет загружен в Git репозиторий.

## Шаг 2: Настройка SSH ключей

Запустите скрипт настройки SSH:

```powershell
cd C:\MAIN\Bots\Media_lab
.\deploy\scripts\setup-ssh-auto.ps1
```

Скрипт:
- Создаст SSH ключ (если его нет)
- Скопирует ключ на сервер (потребуется ввести пароль один раз)
- Настроит автоматическое подключение

## Шаг 3: Проверка подключения

После настройки проверьте подключение:

```powershell
ssh reg-ru-neurostudio
```

Если подключение происходит без запроса пароля - всё настроено правильно!

## Использование автоматических команд

После настройки вы можете использовать:

### Выполнение команд на сервере:
```powershell
.\deploy\scripts\ssh-exec.ps1 "docker ps"
.\deploy\scripts\ssh-exec.ps1 "cd /opt/media-lab && ls -la"
```

### Полное автоматическое развертывание:
```powershell
.\deploy\scripts\auto-deploy-full.ps1
```

Этот скрипт автоматически:
- Загрузит файлы проекта на сервер
- Распакует их
- Настроит окружение
- Создаст необходимые директории

## Безопасность

- Файл `server-credentials.json` НЕ должен попадать в Git репозиторий
- SSH ключи хранятся в `~/.ssh/` и защищены правами доступа
- После настройки SSH ключей пароль больше не нужен

## Решение проблем

Если подключение не работает:
1. Проверьте, что файл `server-credentials.json` создан и заполнен
2. Запустите `setup-ssh-auto.ps1` снова
3. Проверьте права доступа: `ls -la ~/.ssh/` на сервере







