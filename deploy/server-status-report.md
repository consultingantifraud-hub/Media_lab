# –û—Ç—á–µ—Ç –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** 1 –¥–µ–Ω—å, 15 —á–∞—Å–æ–≤, 42 –º–∏–Ω—É—Ç—ã
**–ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã:** 0.02, 0.01, 0.00 (–æ—Ç–ª–∏—á–Ω–æ!)

### –†–µ—Å—É—Ä—Å—ã:
- **CPU:** 0% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (100% idle) ‚úÖ
- **–ü–∞–º—è—Ç—å:** 810 MB / 2.9 GB –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ (28%) ‚úÖ
  - –°–≤–æ–±–æ–¥–Ω–æ: 2.1 GB
- **–î–∏—Å–∫:** 8.4 GB / 59 GB –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ (15%) ‚úÖ
  - –°–≤–æ–±–æ–¥–Ω–æ: 49 GB

## üê≥ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

### –°—Ç–∞—Ç—É—Å:
- ‚úÖ **redis** - healthy (33 —á–∞—Å–∞ —Ä–∞–±–æ—Ç—ã)
- ‚ö†Ô∏è **bot** - unhealthy (23 —á–∞—Å–∞ —Ä–∞–±–æ—Ç—ã)
- ‚ö†Ô∏è **api** - unhealthy (37 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã)
- ‚ö†Ô∏è **worker-image** - unhealthy (37 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:
- **bot:** 143.6 MB RAM (4.83%), CPU: 0%
- **api:** 105.9 MB RAM (3.56%), CPU: 0.38%
- **worker:** 33.22 MB RAM (1.62%), CPU: 0%
- **redis:** 5.9 MB RAM (0.20%), CPU: 0.69%

**–í—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** ~288 MB RAM (–æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ!)

## üíæ Docker –¥–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ

### –î–æ –æ—á–∏—Å—Ç–∫–∏:
- **Images:** 5.5 GB (–º–æ–∂–Ω–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å 4.2 GB - 76%)
- **Containers:** 26.8 MB (0% –º–æ–∂–Ω–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å)
- **Volumes:** 2.5 MB (0% –º–æ–∂–Ω–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å)
- **Build Cache:** 3.0 GB (–º–æ–∂–Ω–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å 452 MB)

### –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ ‚úÖ:
- **Images:** 3.2 GB (–æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ: 2.3 GB)
- **Build Cache:** 1.4 GB (–æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ: 1.6 GB)
- **–í—Å–µ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ:** ~1.6 GB

**–°—Ç–∞—Ç—É—Å:** –û—á–∏—Å—Ç–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!

### –û–±—Ä–∞–∑—ã:
- deploy-worker-image: 769 MB
- deploy-bot: 792 MB
- deploy-api: 1.2 GB
- redis: 60.7 MB

## üìÅ –ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã

- **images:** 209 MB
- **edits:** 290 MB
- **face_swap:** 81 MB
- **videos:** 4 KB

**–í—Å–µ–≥–æ:** ~580 MB (–Ω–æ—Ä–º–∞–ª—å–Ω–æ)

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã

1. **Unhealthy —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–ù–ê–ô–î–ï–ù–ê –ü–†–ò–ß–ò–ù–ê):**
   - bot, api, worker-image –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ unhealthy
   - **–ü—Ä–∏—á–∏–Ω–∞:** –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è healthcheck:
     - `bot`: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `pgrep` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ healthcheck)
     - `api`: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `curl` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ healthcheck)
     - `worker-image`: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `pgrep` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ healthcheck)
   - **–í–∞–∂–Ω–æ:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –≠—Ç–æ —Ç–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º–∞ healthcheck
   - **–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `procps` (–¥–ª—è pgrep) –∏ `curl` –≤ Dockerfile, –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å healthcheck –Ω–∞ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π

2. **–û–¥–∏–Ω —Ç–∞–π–º–∞—É—Ç –≤ –ª–æ–≥–∞—Ö:**
   - `translate_to_english timed out after 10s` (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –µ—Å—Ç—å retry)

3. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Docker –æ–±—Ä–∞–∑—ã:**
   - 2 –æ–±—Ä–∞–∑–∞ `<none>` (–ø–æ 769 MB –∫–∞–∂–¥—ã–π) - –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å
   - Build cache: 3 GB (–º–æ–∂–Ω–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å 452 MB)

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –û—á–∏—Å—Ç–∫–∞ Docker (–æ—Å–≤–æ–±–æ–¥–∏—Ç ~4.65 GB):
```bash
# –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–Ω–µ –∑–∞—Ç—Ä–æ–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)
docker image prune -f          # –£–¥–∞–ª–∏—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã
docker builder prune -f         # –û—á–∏—Å—Ç–∏—Ç build cache
docker container prune -f       # –£–¥–∞–ª–∏—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker volume prune -f          # –£–¥–∞–ª–∏—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ volumes
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ healthcheck (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
**–í–∞—Ä–∏–∞–Ω—Ç –ê:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –≤ Dockerfile:
- –î–ª—è `bot` –∏ `worker-image`: –¥–æ–±–∞–≤–∏—Ç—å `procps` (—Å–æ–¥–µ—Ä–∂–∏—Ç `pgrep`)
- –î–ª—è `api`: –¥–æ–±–∞–≤–∏—Ç—å `curl`

**–í–∞—Ä–∏–∞–Ω—Ç –ë:** –ò–∑–º–µ–Ω–∏—Ç—å healthcheck –Ω–∞ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π:
- –î–ª—è `bot`: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ps aux | grep python` –≤–º–µ—Å—Ç–æ `pgrep`
- –î–ª—è `api`: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `wget` –∏–ª–∏ `python -c "import urllib.request; urllib.request.urlopen('http://localhost:8000/health')"`

**–í–∞—Ä–∏–∞–Ω—Ç –í:** –û—Ç–∫–ª—é—á–∏—Ç—å healthcheck (–µ—Å–ª–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ ‚úÖ
- –†–µ—Å—É—Ä—Å–æ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ‚úÖ
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –Ω–µ—Ç ‚úÖ
- Unhealthy —Å—Ç–∞—Ç—É—Å –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–∏—Å–∞

## üéØ –í—ã–≤–æ–¥

**–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞: –û–¢–õ–ò–ß–ù–û–ï** ‚úÖ

- –ù–∏–∑–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ CPU –∏ –ø–∞–º—è—Ç–∏
- –ú–Ω–æ–≥–æ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- –ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å Docker –∫—ç—à (~4.65 GB)

