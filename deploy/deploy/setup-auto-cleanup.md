# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ Docker

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

1. **–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –æ—á–∏—Å—Ç–∫–∏:** `/opt/media-lab/server-cleanup-daily.sh`
   - –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `/opt/media-lab/logs/docker-cleanup.log`
   - –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –æ–±—Ä–∞–∑–æ–≤, build cache (—Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤), –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ volumes
   - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

2. **–ù–∞—Å—Ç—Ä–æ–µ–Ω cron job:**
   - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: **02:00 –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏** (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å)
   - –ö–æ–º–∞–Ω–¥–∞: `TZ=Europe/Moscow /opt/media-lab/server-cleanup-daily.sh`
   - –í—ã–≤–æ–¥ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –≤ `/dev/null` (–ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª)

## üìã –ß—Ç–æ –æ—á–∏—â–∞–µ—Ç—Å—è

- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Docker –æ–±—Ä–∞–∑—ã (dangling images)
- Build cache —Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤
- –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ volumes

**–í–∞–∂–Ω–æ:** –†–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã –ù–ï —É–¥–∞–ª—è—é—Ç—Å—è!

## üìù –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏
ssh reg-ru-neurostudio "tail -50 /opt/media-lab/logs/docker-cleanup.log"

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –ª–æ–≥–∏
ssh reg-ru-neurostudio "cat /opt/media-lab/logs/docker-cleanup.log"
```

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ cron job

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö –∑–∞–¥–∞—á
ssh reg-ru-neurostudio "crontab -l"

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á
ssh reg-ru-neurostudio "crontab -e"

# –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –æ—á–∏—Å—Ç–∫–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
ssh reg-ru-neurostudio "crontab -l | grep -v 'server-cleanup-daily.sh' | crontab -"
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
ssh reg-ru-neurostudio "/opt/media-lab/server-cleanup-daily.sh"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞
ssh reg-ru-neurostudio "tail -30 /opt/media-lab/logs/docker-cleanup.log"
```

## ‚è∞ –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- **–ú–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è:** 02:00 (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å)
- Cron —Ñ–æ—Ä–º–∞—Ç: `0 2 * * * TZ="Europe/Moscow" /opt/media-lab/server-cleanup-daily.sh`

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `/opt/media-lab/logs/docker-cleanup.log` —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ—á–∏—Å—Ç–∫–∏.

